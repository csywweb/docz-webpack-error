---
name: simpleForm
route: /simple-form
menu: 通用组件
---

import SimpleForm from './index';
import { FormDialog, NormalForm } from './demo'
import { Playground, Props } from 'docz';

## 简介

为了简化zent form 衍生而出的一种使用一个对象数组配置 form 的方式

> owner 思远

## 引入
```js
import { SimpleForm } from '@youzan/beauty-react-components';
```

## 使用方法

支持2种调用方式：

### 第一种 
Dialog的形式，隐藏操作按钮，通过工具函数isFormValid和getFormValues获取表单验证状态和表单值（借助ref），不需要传submit回调，提交逻辑自行处理


### 代码

``` js
const fieldsConfig = [
    {
        name: 'type',
        label: '打印机型号：',
        fType: FieldTypes.INPUT,
        type: 'text',
        required: true,
        value: 0,
        validations: {
            required: true,
        },
        validationErrors: {
            required: '请输入打印机型号',
        },
    }, {
        name: 'deviceName',
        label: '备注名称：',
        fType: FieldTypes.INPUT,
        type: 'text',
        required: true,
        validations: {
            required: true,
        },
        validationErrors: {
            required: '请输入备注名称',
        },
    }
];
class FormDialog extends PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            visible: false
        };
    }

    getDialogBtns() {
        return (
            <div>
                <Button type="primary" onClick={this.updated}>保存</Button>
                <Button type="primary" outline onClick={this.onCancel}>取消</Button>
            </div>
        );
    }

    updated = () => {
        if (isFormValid(this.form).isValid) {
            // 通过 ref 的方式取到 form 实例，再使用 getFormValues API 取得 form 字段值
            const data = getFormValues(this.form);
            this.onCancel();
            console.log(data);
        }
    }

    onCancel = () => {
        this.setState({ visible: false })
    }

    render() {
        const formProps = {
            fieldsConfig,
            onSubmit: this.updated,
            showSubmit: false,
            showCancel: false,
        };

        return [
            <Dialog
                title='标题'
                visible={this.state.visible}
                onClose={this.onCancel}
                footer={this.getDialogBtns()}
            >
                <SimpleForm {...formProps} ref={(ref) => { this.form = ref; }} />
            </Dialog>,
            <Button onClick={() => this.setState({ visible: true })}>点我体验</Button>,
        ];
    }
}
```

### 试试看
<FormDialog></FormDialog>


### 第二种 

传统的form提交，默认有保存和取消按钮，只需要传入field配置和submit回调，onSubmit被触发时，会传入2个参数：values, zentForm

```js
const fieldsConfig = [
    {
        name: 'ruleName',
        label: '规则名称:',
        fType: FieldTypes.INPUT,
        type: 'text',
        required: true,
        value: '',
        placeholder: '最多20个汉字',
        className: 'ruleName',
        validations: {
            required: true,
            maxLength: 20,
        },
        validationErrors: {
            required: '规则名称不能为空',
            maxLength: '最多20个汉字',
        },
    },
    {
        name: 'rechargeAmount',
        label: '储值金额:',
        fType: FieldTypes.INPUT,
        type: 'number',
        required: true,
        addonAfter: '元',
        value: '',
        placeholder: '0.0',
        validations: {
            required: true,
            min: (values, value) => value > 0,
            max: (values, value) => {
                if (value > 10000) {
                    return false;
                }
                return true;
            },
        },
        validationErrors: {
            min: '充值金额必须大于0',
            max: `充值金额不超过10000元`,
        },
    }
];

export default class RechargeCreate extends React.Component {
    constructor(props) {
        super(props);

        this.state = {
            fieldsConfig,
        };
    }

   

    onSubmit = (formValues) => {
        console.log(formValues)
    }

    onCancel = () => {
        console.log("onCancel")
    }


    render() {
        const formProps = {
            fieldsConfig,
            onSubmit: this.onSubmit,
            onCancel: this.onCancel,
        };
        return (
            <div className={scss.style}>
                <SimpleForm {...formProps} />
            </div>
        );
    }
}
```

### 带提交按钮模式
<NormalForm></NormalForm>

## 参数

| 参数 | 类型 | 是否必填 | 默认值 | 说明
|------|------|------|------|------|
| fieldsConfig | array | 无 | 是 | 组件类型配置数组，其中`name`和`fType`字段必填 |
| onSubmit | func | 否 | undefined | form 提交的回调函数，会传入 formValues 和 zentForm |
| onCancel | func | 否 | undefined | 取消的回调函数 |
| showSubmit | boolean | 否 | true | 是否显示保存按钮 |
| showCancel | boolean | 否 | true | 是否显示取消按钮 |